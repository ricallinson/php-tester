#!/usr/bin/php
<?php
error_reporting(E_ALL);
ini_set('display_errors', 'on');

// Find "php-require" by walking up the directories.

function findPhpRequire($path, $searchFor = array("node_modules", "php-require", "index.php")) {
    $fullpath = null;
    while ($fullpath === null && strlen($path) > 1) {
        $fullpath = $path . DIRECTORY_SEPARATOR . implode(DIRECTORY_SEPARATOR, $searchFor);
        if (file_exists($fullpath)) {
            return $fullpath;
        }
        $fullpath = null;
        $path = dirname($path);
    }
}

$fullpath = findPhpRequire(__DIR__);
$fullpath = $fullpath ? $fullpath : findPhpRequire(__DIR__, array("php-require", "index.php"));

require_once($fullpath);
require_once(__DIR__ . DIRECTORY_SEPARATOR . ".." . DIRECTORY_SEPARATOR . "index.php");
